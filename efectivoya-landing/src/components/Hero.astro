---
import ButtonCTA from './ButtonCTA.astro';

const coins = [
  /* columna izq */
  { left: '3%',  cls: 'xl',  delay: '0s',    dur: '7s',    sway: '14px',  gold: true  },
  { left: '10%', cls: 'xxl', delay: '3.5s',  dur: '9s',    sway: '-18px', gold: false },
  { left: '10%', cls: 'lg',  delay: '7s',    dur: '7.5s',  sway: '10px',  gold: true  },
  { left: '18%', cls: 'lg',  delay: '1.5s',  dur: '6.5s',  sway: '-12px', gold: false },
  { left: '18%', cls: 'xl',  delay: '5s',    dur: '8s',    sway: '16px',  gold: true  },
  /* columna centro-izq */
  { left: '28%', cls: 'xxl', delay: '0.5s',  dur: '10s',   sway: '20px',  gold: false },
  { left: '28%', cls: 'lg',  delay: '6s',    dur: '7s',    sway: '-14px', gold: true  },
  { left: '38%', cls: 'xl',  delay: '2.5s',  dur: '8.5s',  sway: '12px',  gold: false },
  { left: '38%', cls: 'lg',  delay: '8.5s',  dur: '6.5s',  sway: '-10px', gold: true  },
  /* columna centro */
  { left: '50%', cls: 'xxl', delay: '1s',    dur: '9.5s',  sway: '-20px', gold: true  },
  { left: '50%', cls: 'xl',  delay: '5.5s',  dur: '8s',    sway: '18px',  gold: false },
  /* columna centro-der */
  { left: '62%', cls: 'lg',  delay: '3s',    dur: '7s',    sway: '-12px', gold: true  },
  { left: '62%', cls: 'xxl', delay: '7.5s',  dur: '10.5s', sway: '16px',  gold: false },
  { left: '72%', cls: 'xl',  delay: '0.8s',  dur: '8.5s',  sway: '-18px', gold: true  },
  { left: '72%', cls: 'lg',  delay: '6.5s',  dur: '7s',    sway: '14px',  gold: false },
  /* columna der */
  { left: '82%', cls: 'xxl', delay: '2s',    dur: '9s',    sway: '-16px', gold: true  },
  { left: '82%', cls: 'lg',  delay: '8s',    dur: '7.5s',  sway: '10px',  gold: false },
  { left: '90%', cls: 'xl',  delay: '4s',    dur: '8s',    sway: '18px',  gold: true  },
  { left: '90%', cls: 'lg',  delay: '9.5s',  dur: '6.5s',  sway: '-12px', gold: false },
  { left: '97%', cls: 'xxl', delay: '1.8s',  dur: '10s',   sway: '-20px', gold: true  },
];
---

<section id="que-es" class="hero">

  <!-- Background grid -->
  <div class="hero-grid" aria-hidden="true"></div>

  <!-- Radial glow -->
  <div class="hero-glow" aria-hidden="true"></div>

  <!-- Corner accents -->
  <div class="corner-accent corner-tl" aria-hidden="true"></div>
  <div class="corner-accent corner-br" aria-hidden="true"></div>

  <!-- ── Monedas como fondo completo ── -->
  <div class="hero-coins-bg" aria-hidden="true">
    {coins.map(c => (
      <div
        class={`coin coin-${c.cls}`}
        style={`left:${c.left}; animation-delay:${c.delay}; animation-duration:${c.dur}; --coin-sway:${c.sway};`}
      >
        <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="24" cy="24" r="22" fill="#1C1200"/>
          <circle cx="24" cy="24" r="22" fill="none" stroke={c.gold ? '#E09F3C' : '#C8921E'} stroke-width="1.8"/>
          <circle cx="24" cy="24" r="18" fill="none" stroke={c.gold ? 'rgba(224,159,60,0.2)' : 'rgba(200,146,30,0.2)'} stroke-width="1"/>
          <line x1="24" y1="8" x2="24" y2="40" stroke={c.gold ? '#E09F3C' : '#C8921E'} stroke-width="2.6" stroke-linecap="round"/>
          <path d="M33 16C33 12 29 10 24 10C19 10 15 12 15 16C15 21 19 23 24 24C29 25 33 28 33 32C33 36 29 38 24 38C19 38 15 36 15 32"
                stroke={c.gold ? '#E09F3C' : '#C8921E'} stroke-width="2.6" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    ))}
  </div>

  <!-- Fade: protege el texto en desktop (oscurece izquierda), atenúa todo en mobile -->
  <div class="coins-fade" aria-hidden="true"></div>

  <!-- ── 2-col inner ── -->
  <div class="hero-inner">

    <!-- LEFT: content -->
    <div class="hero-content">

      <!-- Badge -->
      <div class="hero-badge fade-up delay-100" role="presentation">
        <span class="badge-dot pulse-dot" aria-hidden="true"></span>
        <span>Billetera Digital&nbsp;·&nbsp;Perú</span>
      </div>

      <!-- Main title -->
      <h1 class="hero-title fade-up delay-200">
        <span class="title-white">EFECTIVO&nbsp;</span><span class="title-red">YA</span>
      </h1>

      <!-- Tagline -->
      <p class="hero-tagline fade-up delay-300">
        Tu dinero al instante. Recarga tu billetera digital, retira a cualquiera de
        tus cuentas bancarias y gestiona tus finanzas sin complicaciones.
      </p>

      <!-- Speed badge -->
      <div class="speed-badge fade-up delay-350" role="presentation">
        <span class="speed-icon" aria-hidden="true">⚡</span>
        <span>Aprobación en segundos&nbsp;—&nbsp;no horas, no minutos</span>
      </div>

      <!-- CTA buttons -->
      <div class="hero-ctas fade-up delay-400">
        <ButtonCTA
          href="https://app.efectivoya.net"
          text="Acceder a la App"
          target="_blank"
          variant="primary"
          size="lg"
        />
        <a href="#como-funciona" class="cta-ghost">
          Cómo funciona
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
            <path d="M8 2v12M3 9l5 5 5-5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>

      <!-- Store badges -->
      <div class="store-badges fade-up delay-500">
        <span class="store-label">Disponible en</span>
        <div class="store-buttons">
          <a href="#" target="_blank" rel="noopener noreferrer" class="store-btn" aria-label="Descargar en App Store">
            <img src="/stores/appstore.png" alt="Descargar en App Store" class="store-badge-img" loading="lazy" />
          </a>
          <a href="#" target="_blank" rel="noopener noreferrer" class="store-btn" aria-label="Disponible en Google Play">
            <img src="/stores/playstore.png" alt="Disponible en Google Play" class="store-badge-img" loading="lazy" />
          </a>
        </div>
      </div>

      <!-- Trust strip -->
      <div class="hero-trust fade-up delay-600">
        <div class="trust-item">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="none" aria-hidden="true">
            <path d="M8 1l1.5 4.5H15l-4 3 1.5 4.5L8 10.5 3.5 13 5 8.5l-4-3h5.5z" fill="#E09F3C"/>
          </svg>
          Sin costo de registro
        </div>
        <span class="trust-sep" aria-hidden="true">·</span>
        <div class="trust-item">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="none" aria-hidden="true">
            <path d="M8 1l1.5 4.5H15l-4 3 1.5 4.5L8 10.5 3.5 13 5 8.5l-4-3h5.5z" fill="#E09F3C"/>
          </svg>
          Retiros sin comisión
        </div>
        <span class="trust-sep" aria-hidden="true">·</span>
        <div class="trust-item">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="none" aria-hidden="true">
            <path d="M8 1l1.5 4.5H15l-4 3 1.5 4.5L8 10.5 3.5 13 5 8.5l-4-3h5.5z" fill="#E09F3C"/>
          </svg>
          Soporte humano 24/7
        </div>
      </div>

    </div>

    <!-- Spacer derecho: mantiene el grid 2 col en desktop, oculto en mobile -->
    <div class="hero-spacer" aria-hidden="true"></div>

  </div>

  <!-- ── Stats strip dentro del hero ── -->
  <div class="hero-stats-strip fade-up delay-700" aria-label="Datos clave EfectivoYa">
    <div class="hstat">
      <span class="hstat-num">3,000<span class="hstat-sup">+</span></span>
      <span class="hstat-lbl">Usuarios activos</span>
    </div>
    <div class="hstat-sep" aria-hidden="true"></div>
    <div class="hstat">
      <span class="hstat-num">4</span>
      <span class="hstat-lbl">Bancos compatibles</span>
    </div>
    <div class="hstat-sep" aria-hidden="true"></div>
    <div class="hstat">
      <span class="hstat-num">S/. 0</span>
      <span class="hstat-lbl">Comisión en retiros</span>
    </div>
    <div class="hstat-sep" aria-hidden="true"></div>
    <div class="hstat">
      <span class="hstat-num hstat-red"><span class="hstat-lt">&lt;</span>60<span class="hstat-sup">s</span></span>
      <span class="hstat-lbl">Aprobación de recarga</span>
    </div>
  </div>

  <!-- Scroll indicator -->
  <div class="scroll-indicator fade-up delay-600" aria-hidden="true">
    <div class="scroll-line"></div>
  </div>

</section>

<style>
  .delay-350 { animation-delay: 0.475s; }
  .delay-700 { animation-delay: 1.05s; }

  /* ────────────────────────────────────────────
     HERO
  ──────────────────────────────────────────── */
  .hero {
    position: relative;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background-color: #201F1F;
    padding: clamp(100px, 14vh, 140px) clamp(20px, 4vw, 60px) clamp(60px, 8vh, 80px);
  }

  /* ── Background elements ── */
  .hero-grid {
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(rgba(224,159,60,0.048) 1px, transparent 1px),
      linear-gradient(90deg, rgba(224,159,60,0.048) 1px, transparent 1px);
    background-size: 80px 80px;
    background-position: center;
    pointer-events: none;
    z-index: 0;
  }

  .hero-glow {
    position: absolute;
    top: 42%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: clamp(500px, 90vw, 1000px);
    height: clamp(500px, 90vw, 1000px);
    background: radial-gradient(circle at center,
      rgba(224,159,60,0.13) 0%,
      rgba(224,159,60,0.05) 38%,
      transparent 68%);
    pointer-events: none;
    border-radius: 50%;
    z-index: 0;
  }

  .corner-accent {
    position: absolute;
    width: 300px;
    height: 300px;
    pointer-events: none;
    z-index: 0;
  }
  .corner-tl {
    top: 0; left: 0;
    background: radial-gradient(circle at top left, rgba(224,159,60,0.07) 0%, transparent 60%);
  }
  .corner-br {
    bottom: 0; right: 0;
    background: radial-gradient(circle at bottom right, rgba(237,50,58,0.06) 0%, transparent 60%);
  }

  /* ── Coins background ── */
  .hero-coins-bg {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
    z-index: 1;
  }

  /* Fade: izquierda oscura (protege el texto), derecha transparente (monedas visibles)
     Mobile: overlay más suave para que se vean mejor */
  .coins-fade {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    background: linear-gradient(
      to right,
      #201F1F 0%,
      #201F1F 28%,
      rgba(32,31,31,0.65) 42%,
      rgba(32,31,31,0.12) 56%,
      transparent 68%
    );
  }

  @media (max-width: 960px) {
    .coins-fade {
      background: rgba(32,31,31,0.55);
    }
  }

  /* ── Coin elements ── */
  .coin {
    position: absolute;
    top: -90px;
    opacity: 0;                          /* oculto hasta que empiece la animación */
    animation: coinFall linear infinite;
    animation-fill-mode: backwards;      /* aplica el 0% keyframe durante el delay */
    filter: drop-shadow(0 0 10px rgba(224,159,60,0.4));
  }

  .coin svg { display: block; width: 100%; height: auto; }

  .coin-lg  { width: 110px; }
  .coin-xl  { width: 150px; }
  .coin-xxl { width: 200px; }

  @media (max-width: 960px) {
    .coin-xxl { width: 130px; }
    .coin-xl  { width: 100px; }
    .coin-lg  { width: 76px;  }
  }

  @keyframes coinFall {
    0%   { top: -90px; opacity: 0;   transform: rotate(-6deg) translateX(0); }
    8%   {              opacity: 0.68; }
    50%  {                             transform: rotate(4deg) translateX(var(--coin-sway, 12px)); }
    88%  {              opacity: 0.3; }
    100% { top: calc(100% + 30px); opacity: 0; transform: rotate(10deg) translateX(0); }
  }

  /* ────────────────────────────────────────────
     2-col inner
  ──────────────────────────────────────────── */
  .hero-inner {
    position: relative;
    z-index: 3;
    width: 100%;
    max-width: 1280px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
    align-items: center;
  }

  @media (max-width: 960px) {
    .hero-inner {
      grid-template-columns: 1fr;
    }
    .hero-spacer { display: none; }
  }

  /* ── Content (left) ── */
  .hero-content {
    text-align: left;
    max-width: 560px;
  }

  @media (max-width: 960px) {
    .hero-content {
      text-align: center;
      max-width: 820px;
      margin: 0 auto;
    }
  }

  /* Badge */
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 9px;
    padding: 8px 18px;
    background: rgba(224,159,60,0.08);
    border: 1px solid rgba(224,159,60,0.28);
    border-radius: 100px;
    font-family: 'Sora', sans-serif;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: #E09F3C;
    margin-bottom: 28px;
  }

  .badge-dot {
    width: 7px;
    height: 7px;
    background: #E09F3C;
    border-radius: 50%;
    flex-shrink: 0;
  }

  /* Title */
  .hero-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(52px, 9vw, 128px);
    line-height: 0.92;
    letter-spacing: -0.01em;
    margin-bottom: 24px;
    white-space: nowrap;
  }

  .title-white { color: #fff; }
  .title-red   { color: #ED323A; }

  /* Tagline */
  .hero-tagline {
    font-family: 'Sora', sans-serif;
    font-weight: 300;
    font-size: clamp(15px, 1.8vw, 18px);
    color: #B2B3B3;
    max-width: 480px;
    margin: 0 0 20px;
    line-height: 1.68;
  }

  @media (max-width: 960px) {
    .hero-tagline { margin: 0 auto 20px; }
  }

  /* Speed badge */
  .speed-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(237, 50, 58, 0.12);
    border: 1px solid rgba(237, 50, 58, 0.4);
    border-radius: 100px;
    font-family: 'Sora', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: #ff6b70;
    margin-bottom: 16px;
    animation: speedPulse 2.8s ease-in-out infinite;
  }

  .speed-icon {
    font-size: 15px;
    animation: boltFlash 2.8s ease-in-out infinite;
  }

  @keyframes speedPulse {
    0%, 100% { border-color: rgba(237, 50, 58, 0.4); }
    50%       { border-color: rgba(237, 50, 58, 0.7); }
  }

  @keyframes boltFlash {
    0%, 80%, 100% { opacity: 1; }
    90%           { opacity: 0.4; }
  }

  /* CTAs */
  .hero-ctas {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 14px;
    flex-wrap: wrap;
    margin-bottom: 28px;
  }

  @media (max-width: 960px) {
    .hero-ctas { justify-content: center; }
  }

  @media (max-width: 600px) {
    .hero-ctas {
      flex-direction: column;
      align-items: center;
    }
    .hero-ctas .cta-ghost {
      justify-content: center;
      width: 100%;
      max-width: 320px;
    }
  }

  .cta-ghost {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 16px 26px;
    color: #B2B3B3;
    font-family: 'Sora', sans-serif;
    font-size: 15px;
    font-weight: 500;
    text-decoration: none;
    border: 1px solid rgba(178,179,179,0.25);
    border-radius: 6px;
    transition: all 0.22s ease;
  }

  .cta-ghost:hover {
    color: #fff;
    border-color: rgba(255,255,255,0.4);
    background: rgba(255,255,255,0.04);
    transform: translateY(-2px);
  }

  .cta-ghost svg { transition: transform 0.22s ease; }
  .cta-ghost:hover svg { transform: translateY(3px); }

  /* Store badges */
  .store-badges {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 32px;
  }

  @media (max-width: 960px) {
    .store-badges { align-items: center; }
  }

  .store-label {
    font-family: 'Sora', sans-serif;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: rgba(178,179,179,0.55);
  }

  .store-buttons {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: flex-start;
  }

  @media (max-width: 960px) {
    .store-buttons { justify-content: center; }
  }

  @keyframes badgeBeam {
    0%   { background-position: 220% center; }
    100% { background-position: -120% center; }
  }

  .store-btn {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 11px;
    padding: 0;
    border: none;
    background: none;
    overflow: visible;
    transition: transform 0.2s ease;
  }

  .store-btn:hover { transform: translateY(-2px); }

  .store-btn::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: 12px;
    padding: 1px;
    background: linear-gradient(
      90deg,
      rgba(224, 159, 60, 0.18)  0%,
      rgba(224, 159, 60, 0.18) 30%,
      rgba(224, 159, 60, 0.5)  42%,
      rgba(255, 232, 120, 0.85) 50%,
      rgba(224, 159, 60, 0.5)  58%,
      rgba(224, 159, 60, 0.18) 70%,
      rgba(224, 159, 60, 0.18) 100%
    );
    background-size: 300% 100%;
    animation: badgeBeam 3.5s ease-in-out infinite;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    z-index: 1;
  }

  .store-badge-img {
    height: 62px;
    width: auto;
    max-width: 200px;
    display: block;
    object-fit: contain;
    border-radius: 11px;
    position: relative;
    z-index: 0;
  }

  /* Trust strip */
  .hero-trust {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 16px;
    flex-wrap: wrap;
  }

  @media (max-width: 960px) {
    .hero-trust { justify-content: center; }
  }

  .trust-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: 'Sora', sans-serif;
    font-size: 13px;
    font-weight: 400;
    color: #B2B3B3;
  }

  .trust-sep {
    color: rgba(178,179,179,0.3);
    font-size: 18px;
    line-height: 1;
  }

  /* ────────────────────────────────────────────
     STATS STRIP dentro del hero
  ──────────────────────────────────────────── */
  .hero-stats-strip {
    position: relative;
    z-index: 3;
    width: 100%;
    max-width: 1280px;
    margin-top: 44px;
    padding: 20px 32px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(224,159,60,0.12);
    border-radius: 14px;
    display: grid;
    grid-template-columns: 1fr auto 1fr auto 1fr auto 1fr;
    align-items: center;
  }

  @media (max-width: 600px) {
    .hero-stats-strip {
      grid-template-columns: 1fr 1fr;
      padding: 16px;
    }
    .hstat-sep { display: none; }
    .hstat:nth-child(1),
    .hstat:nth-child(3) { border-right: 1px solid rgba(224,159,60,0.1); }
    .hstat:nth-child(1),
    .hstat:nth-child(2) { border-bottom: 1px solid rgba(224,159,60,0.1); }
  }

  .hstat {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 4px;
    padding: 8px 16px;
  }

  @media (max-width: 600px) {
    .hstat { padding: 14px 8px; }
  }

  .hstat-sep {
    width: 1px;
    height: 40px;
    background: rgba(224,159,60,0.15);
    margin: 0 4px;
  }

  .hstat-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(26px, 3.5vw, 38px);
    line-height: 1;
    color: #E09F3C;
    letter-spacing: 0.01em;
    display: flex;
    align-items: baseline;
    gap: 1px;
  }

  .hstat-sup {
    font-size: 0.55em;
    line-height: 1;
    vertical-align: super;
  }

  .hstat-lt  { font-size: 0.72em; }
  .hstat-red { color: #ED323A; }

  .hstat-lbl {
    font-family: 'Sora', sans-serif;
    font-size: clamp(11px, 1.1vw, 13px);
    font-weight: 500;
    color: rgba(178,179,179,0.7);
    white-space: nowrap;
  }

  /* ────────────────────────────────────────────
     Scroll indicator
  ──────────────────────────────────────────── */
  .scroll-indicator {
    position: absolute;
    bottom: 32px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 3;
  }

  .scroll-line {
    width: 1px;
    height: 52px;
    background: linear-gradient(to bottom, rgba(224,159,60,0.7), transparent);
    margin: 0 auto;
    animation: scrollLine 2s ease-in-out infinite;
  }

  @keyframes scrollLine {
    0%   { opacity: 1; transform: scaleY(1) translateY(0); }
    100% { opacity: 0; transform: scaleY(0.3) translateY(100%); }
  }

  @media (max-width: 480px) {
    .trust-sep        { display: none; }
    .hero-trust       { flex-direction: column; gap: 8px; }
    .scroll-indicator { display: none; }
  }
</style>
